<!doctype html>
<html>
<head>
    <title>Ghost Race</title>
    <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.0/mapsjs-ui.css" />
    <script src="http://js.api.here.com/v3/3.0/mapsjs-core.js" type="text/javascript" charset="utf-8"></script>
    <script src="http://js.api.here.com/v3/3.0/mapsjs-service.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>

    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
    <link rel="stylesheet" href="css/pacman.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
    <script type="text/javascript">
        $.mobile.defaultPageTransition = "fade";
    </script>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="apple-touch-icon-152x152.png" />
</head>
<body>
    <div data-role="page" id="start">
        <img src="images/logo.png" width="100%" class="logo">

        <div data-role="content" class="ui-content borderless centered">
            <a href="#new_race" class="ui-btn">New Race</a>
            <a href="#favourite_routes" class="ui-btn">Favourite Routes</a>
            <a href="#history" class="ui-btn">History</a>
        </div>

        <div data-role="footer" data-position="fixed" id="footer">
            <div data-role="navbar">
                <ul>
                  <li><a href="#">About</a></li>
                  <li><a href="#">Settings</a></li>
                  <li><a href="#">Feedback</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="new_race">
        <div data-role="header">
            <h1>New Race</h1>
            <a data-rel="back" data-icon="back" class="ui-btn-left">Back</a>
        </div>
        <input type="text" data-corners="false" name="start_location" id="start_location" placeholder="Start" value="">
        <input type="text" data-corners="false" name="end_location" id="end_location" placeholder="Destination" value="">

        <a href="#race" class="ui-btn" id="submit_route">Show Routes</a>

    </div>

    <div data-role="page" id="race">
        <div data-role="header">
            <h1>Race</h1>
            <a data-rel="back" data-icon="back" class="ui-btn-left">Back</a>
        </div>

        <div role="main" style ="width:100%; height:480px;" id="mapContainer"></div>
        <div id="route-list"></div>
    </div>

    <script src="script/app.js" type="text/javascript"></script>
    <script src="script/map.js" type="text/javascript"></script>
    <script src="script/gps.js" type="text/javascript"></script>
    <script src="script/ghost.js" type="text/javascript"></script>
    <script>
    var gpsObject = new GPS();
    var mapObject = new Map(gpsObject);

    $("#start_location").on("focus", function() {
        $("#start_location").val(JSON.stringify(gpsObject.getLocation()));
    });

    var StartStopPoints = {
      startSearchTerm: null,
      stopSearchTerm: null
    }

    $("#submit_route").click(function() {
      mapObject.load($("#end_location").val());
    });

    $(document).on('pageshow', '#race', function() {
      var gpsLocation = gpsObject.getLocation();
      mapObject.init(gpsLocation.lat, gpsLocation.lng)
    });
    </script>
</body>
</html>
